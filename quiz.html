<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Climate Quiz ‚Äì SDG 13</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <style>
        /* Enhanced Quiz Styling */
        .quiz-container {
            max-width: 700px;
            margin: 0 auto;
            background: white;
            border-radius: 14px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }

        body.dark .quiz-container {
            background: #0f2430;
            box-shadow: 0 4px 14px rgba(0, 0, 0, 0.6);
        }

        .quiz-progress {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 1.5rem;
            background: linear-gradient(135deg, #0a6b37, #0f8e53);
            color: white;
        }

        .progress-bar {
            flex: 1;
            height: 6px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
            margin: 0 1rem;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background: #fff;
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .progress-text {
            font-weight: bold;
            font-size: 0.9rem;
        }

        .quiz-content {
            padding: 2rem 1.5rem;
            min-height: 400px;
        }

        .quiz-question-card {
            animation: slideIn 0.4s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .question-number {
            font-size: 0.85rem;
            color: #0a6b37;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        body.dark .question-number {
            color: #6efca3;
        }

        .question-text {
            font-size: 1.2rem;
            font-weight: 600;
            color: #1b2b2b;
            margin-bottom: 1.5rem;
        }

        body.dark .question-text {
            color: #e3f5e7;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        .quiz-option {
            display: flex;
            align-items: center;
            padding: 1rem;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            background: #f9fff9;
        }

        body.dark .quiz-option {
            background: #051a14;
            border-color: #1a4d3d;
        }

        .quiz-option:hover {
            border-color: #0a6b37;
            background: #f0fff2;
        }

        body.dark .quiz-option:hover {
            border-color: #6efca3;
            background: #0a3d2a;
        }

        .quiz-option input[type="radio"] {
            margin-right: 0.8rem;
            cursor: pointer;
            width: 18px;
            height: 18px;
        }

        .quiz-option label {
            flex: 1;
            cursor: pointer;
            color: #1b2b2b;
        }

        body.dark .quiz-option label {
            color: #e3f5e7;
        }

        .quiz-option.selected {
            border-color: #0a6b37;
            background: #e6ffe7;
        }

        body.dark .quiz-option.selected {
            border-color: #6efca3;
            background: #0a4d32;
        }

        .quiz-option.correct {
            border-color: #22c55e;
            background: #e7ffe8;
        }

        body.dark .quiz-option.correct {
            border-color: #22c55e;
            background: #0f3d1a;
        }

        .quiz-option.incorrect {
            border-color: #ef4444;
            background: #ffe7e7;
        }

        body.dark .quiz-option.incorrect {
            border-color: #ef4444;
            background: #3d0f0f;
        }

        .feedback-message {
            margin-top: 1rem;
            padding: 0.8rem;
            border-radius: 8px;
            font-weight: 600;
            animation: slideIn 0.3s ease;
        }

        .feedback-correct {
            background: #e7ffe8;
            color: #166534;
            border-left: 4px solid #22c55e;
        }

        .feedback-incorrect {
            background: #ffe7e7;
            color: #991b1b;
            border-left: 4px solid #ef4444;
        }

        body.dark .feedback-correct {
            background: #0f3d1a;
            color: #86efac;
        }

        body.dark .feedback-incorrect {
            background: #3d0f0f;
            color: #fca5a5;
        }

        .quiz-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            padding-top: 1.5rem;
            border-top: 2px solid #f0f0f0;
        }

        body.dark .quiz-actions {
            border-top-color: #1a4d3d;
        }

        .quiz-btn {
            padding: 0.7rem 1.4rem;
            border-radius: 25px;
            border: none;
            font-weight: bold;
            cursor: pointer;
            transition: 0.2s ease;
            font-size: 1rem;
        }

        .btn-next {
            background: #0a6b37;
            color: white;
            min-width: 100px;
        }

        .btn-next:hover:not(:disabled) {
            background: #08582e;
        }

        .btn-next:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-submit {
            background: white;
            color: #0a6b37;
            border: 2px solid #0a6b37;
            min-width: 140px;
        }

        .btn-submit:hover {
            background: #f0fff2;
        }

        .quiz-complete {
            text-align: center;
            padding: 2rem;
        }

        .score-display {
            font-size: 3rem;
            font-weight: bold;
            color: #0a6b37;
            margin: 1rem 0;
        }

        body.dark .score-display {
            color: #6efca3;
        }

        .score-message {
            font-size: 1.3rem;
            color: #1b2b2b;
            margin-bottom: 1.5rem;
        }

        body.dark .score-message {
            color: #e3f5e7;
        }

        .leaderboard-form {
            background: #f9fff9;
            padding: 1.5rem;
            border-radius: 10px;
            margin-top: 1.5rem;
        }

        body.dark .leaderboard-form {
            background: #051a14;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #1b2b2b;
        }

        body.dark .form-group label {
            color: #e3f5e7;
        }

        .form-group input {
            width: 100%;
            padding: 0.7rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            background: white;
            color: #1b2b2b;
        }

        body.dark .form-group input {
            background: #0f2430;
            color: #e3f5e7;
            border-color: #1a4d3d;
        }

        .form-group input:focus {
            outline: none;
            border-color: #0a6b37;
            box-shadow: 0 0 0 3px rgba(10, 107, 55, 0.1);
        }

        .btn-reset {
            background: #0a6b37;
            color: white;
            min-width: 120px;
            margin-top: 0.5rem;
        }

        .btn-reset:hover {
            background: #08582e;
        }

        .emoji-reaction {
            font-size: 4rem;
            margin: 1rem 0;
            animation: bounce 0.6s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
    </style>
</head>

<body data-page="quiz">

    <nav class="navbar">
        <div class="logo">SDG 13</div>
        <ul class="nav-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="features.html">Features</a></li>
            <li><a href="leaderboard.html">Leaderboard</a></li>
        </ul>
    </nav>

    <header class="hero">
        <h1 class="hero-title">üåç Climate Quiz Challenge</h1>
        <p class="hero-subtitle">Test your climate knowledge and earn a spot on the leaderboard!</p>
    </header>

    <section class="section">
        <div class="quiz-container" id="quiz-container">
            
            <!-- Quiz Progress -->
            <div class="quiz-progress">
                <span class="progress-text">Question <span id="current-q">1</span> of <span id="total-q">10</span></span>
                <div class="progress-bar">
                    <div class="progress-bar-fill" id="progress-fill"></div>
                </div>
                <span id="score-counter" style="margin-left: 1rem; font-weight: bold;">Score: 0/10</span>
            </div>

            <!-- Quiz Content -->
            <div class="quiz-content">
                <form id="quiz-form">
                    <div id="quiz-questions-wrapper"></div>

                    <!-- Feedback Message -->
                    <div id="feedback" style="display: none;"></div>

                    <!-- Quiz Actions -->
                    <div class="quiz-actions">
                        <button type="button" id="btn-prev" class="quiz-btn btn-next" style="display: none;">‚Üê Previous</button>
                        <button type="button" id="btn-next" class="quiz-btn btn-next" disabled>Next ‚Üí</button>
                        <button type="submit" id="btn-submit" class="quiz-btn btn-submit" style="display: none;">Submit & View Results</button>
                    </div>
                </form>

                <!-- Quiz Complete Screen -->
                <div id="quiz-complete" style="display: none;">
                    <div class="quiz-complete">
                        <div id="emoji-reaction" class="emoji-reaction"></div>
                        <h2 class="score-message" id="score-message"></h2>
                        <div class="score-display" id="final-score"></div>
                        <p id="score-details" style="color: #666; margin-bottom: 1.5rem; font-size: 1rem;"></p>

                        <div class="leaderboard-form">
                            <h3 style="margin-bottom: 1rem; color: #0a6b37;">Save Your Score to Leaderboard</h3>
                            <div class="form-group">
                                <label for="leader-name">Your Name:</label>
                                <input type="text" id="leader-name" placeholder="Enter your name" required>
                            </div>
                            <button type="button" class="quiz-btn btn-submit" id="btn-save-score">üíæ Save & View Leaderboard</button>
                            <button type="button" class="quiz-btn btn-reset" id="btn-retake">üîÑ Retake Quiz</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <p>Made for SDG 13 ‚Äì Climate Action</p>
    </footer>

<script src="script.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const page = document.body.getAttribute("data-page");

        if (page === "quiz") {
            const quizData = [
                {
                    question: "What does SDG 13 focus on?",
                    options: ["Clean water", "Climate action", "Education"],
                    correct: 1
                },
                {
                    question: "Which gas contributes most to global warming?",
                    options: ["Oxygen", "Carbon dioxide", "Helium"],
                    correct: 1
                },
                {
                    question: "Which action helps reduce carbon footprint?",
                    options: ["Leaving lights on", "Using public transportation", "Burning trash"],
                    correct: 1
                },
                {
                    question: "What percentage of excess heat does the ocean absorb?",
                    options: ["50%", "70%", "90%"],
                    correct: 2
                },
                {
                    question: "How much has sea level risen since 1900?",
                    options: ["10 cm", "20 cm", "50 cm"],
                    correct: 1
                },
                {
                    question: "What percentage of greenhouse gas emissions come from livestock?",
                    options: ["8%", "14%", "25%"],
                    correct: 1
                },
                {
                    question: "How many species are at risk of extinction?",
                    options: ["100,000", "Over 1 million", "10 million"],
                    correct: 1
                },
                {
                    question: "What is the hottest temperature ever recorded on Earth?",
                    options: ["48.9¬∞C", "54.3¬∞C", "56.7¬∞C"],
                    correct: 2
                },
                {
                    question: "How much ice does Antarctica lose yearly?",
                    options: ["50 billion tons", "100 billion tons", "150 billion tons"],
                    correct: 2
                },
                {
                    question: "How many people are killed annually by air pollution?",
                    options: ["1 million", "3.5 million", "7 million"],
                    correct: 2
                }
            ];

            let currentQuestion = 0;
            let score = 0;
            let userAnswers = [];
            let answered = false;

            const form = document.getElementById("quiz-form");
            const wrapper = document.getElementById("quiz-questions-wrapper");
            const btnNext = document.getElementById("btn-next");
            const btnPrev = document.getElementById("btn-prev");
            const btnSubmit = document.getElementById("btn-submit");
            const feedback = document.getElementById("feedback");
            const currentQSpan = document.getElementById("current-q");
            const totalQSpan = document.getElementById("total-q");
            const progressFill = document.getElementById("progress-fill");
            const scoreCounter = document.getElementById("score-counter");
            const quizComplete = document.getElementById("quiz-complete");
            const finalScore = document.getElementById("final-score");
            const scoreMessage = document.getElementById("score-message");
            const scoreDetails = document.getElementById("score-details");
            const emojiReaction = document.getElementById("emoji-reaction");
            const btnSaveScore = document.getElementById("btn-save-score");
            const btnRetake = document.getElementById("btn-retake");
            const leaderName = document.getElementById("leader-name");

            totalQSpan.textContent = quizData.length;

            function renderQuestion() {
                answered = false;
                feedback.style.display = "none";
                const q = quizData[currentQuestion];
                
                wrapper.innerHTML = `
                    <div class="quiz-question-card">
                        <div class="question-number">Question ${currentQuestion + 1}</div>
                        <div class="question-text">${q.question}</div>
                        <div class="quiz-options">
                            ${q.options.map((opt, i) => `
                                <div class="quiz-option" data-index="${i}">
                                    <input type="radio" name="answer" value="${i}" id="opt${i}">
                                    <label for="opt${i}">${opt}</label>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;

                // Add event listeners to options
                document.querySelectorAll(".quiz-option").forEach(opt => {
                    opt.addEventListener("click", () => selectOption(opt, parseInt(opt.getAttribute("data-index"))));
                });

                updateProgress();
                updateButtons();
            }

            function selectOption(element, index) {
                if (answered) return;

                // Remove previous selection
                document.querySelectorAll(".quiz-option").forEach(opt => opt.classList.remove("selected"));
                element.classList.add("selected");
                document.querySelector(`input[value="${index}"]`).checked = true;

                setTimeout(() => submitAnswer(), 500);
            }

            function submitAnswer() {
                if (answered) return;

                const selected = document.querySelector("input[name='answer']:checked");
                if (!selected) return;

                answered = true;
                const selectedIndex = parseInt(selected.value);
                const correct = selectedIndex === quizData[currentQuestion].correct;

                if (correct) {
                    score++;
                    document.querySelector(`[data-index="${selectedIndex}"]`).classList.add("correct");
                    feedback.className = "feedback-message feedback-correct";
                    feedback.innerHTML = "‚ú® Correct! Great job!";
                } else {
                    const correctOption = quizData[currentQuestion].correct;
                    document.querySelector(`[data-index="${selectedIndex}"]`).classList.add("incorrect");
                    document.querySelector(`[data-index="${correctOption}"]`).classList.add("correct");
                    feedback.className = "feedback-message feedback-incorrect";
                    feedback.innerHTML = `‚ùå Incorrect! The correct answer is: ${quizData[currentQuestion].options[correctOption]}`;
                }

                feedback.style.display = "block";
                userAnswers[currentQuestion] = selectedIndex;
                scoreCounter.textContent = `Score: ${score}/${quizData.length}`;
                updateButtons();
            }

            function updateProgress() {
                currentQSpan.textContent = currentQuestion + 1;
                const percent = ((currentQuestion + 1) / quizData.length) * 100;
                progressFill.style.width = percent + "%";
            }

            function updateButtons() {
                const selected = document.querySelector("input[name='answer']:checked");
                
                btnNext.disabled = !selected || !answered;
                btnPrev.style.display = currentQuestion > 0 ? "block" : "none";
                btnNext.style.display = currentQuestion < quizData.length - 1 ? "block" : "none";
                btnSubmit.style.display = currentQuestion === quizData.length - 1 && answered ? "block" : "none";
            }

            function goToQuestion(n) {
                if (n < 0 || n >= quizData.length) return;
                currentQuestion = n;
                renderQuestion();
            }

            function showResults() {
                wrapper.style.display = "none";
                form.style.display = "none";
                document.querySelector(".quiz-progress").style.display = "none";
                quizComplete.style.display = "block";

                const percentage = (score / quizData.length) * 100;
                finalScore.textContent = `${score} / ${quizData.length}`;
                scoreDetails.textContent = `You scored ${percentage.toFixed(0)}% - ${percentage === 100 ? "Perfect!" : percentage >= 80 ? "Excellent performance!" : percentage >= 60 ? "Good effort!" : "Keep practicing!"}`;
                
                if (percentage === 100) {
                    emojiReaction.textContent = "üèÜ";
                    scoreMessage.textContent = "Perfect Score! You're a Climate Hero! üå±";
                } else if (percentage >= 80) {
                    emojiReaction.textContent = "üòç";
                    scoreMessage.textContent = "Excellent! You know your climate facts!";
                } else if (percentage >= 60) {
                    emojiReaction.textContent = "üòä";
                    scoreMessage.textContent = "Good job! You're learning!";
                } else if (percentage >= 40) {
                    emojiReaction.textContent = "ü§î";
                    scoreMessage.textContent = "Not bad! Keep learning about climate action!";
                } else {
                    emojiReaction.textContent = "üí™";
                    scoreMessage.textContent = "Keep learning! Every step counts!";
                }
            }

            // Event Listeners
            btnNext.addEventListener("click", () => {
                if (answered && currentQuestion < quizData.length - 1) {
                    goToQuestion(currentQuestion + 1);
                }
            });

            btnPrev.addEventListener("click", () => {
                if (currentQuestion > 0) {
                    goToQuestion(currentQuestion - 1);
                }
            });

            form.addEventListener("submit", e => {
                e.preventDefault();
                if (!answered) {
                    submitAnswer();
                } else if (currentQuestion === quizData.length - 1) {
                    showResults();
                }
            });

            btnSubmit.addEventListener("click", e => {
                e.preventDefault();
                showResults();
            });

            btnSaveScore.addEventListener("click", () => {
                const name = leaderName.value.trim();
                if (!name) {
                    alert("Please enter your name!");
                    return;
                }

                const key = "sdg13_leaderboard";
                let data = JSON.parse(localStorage.getItem(key) || "[]");
                const finalScore = score;
                data.push({ name, score: finalScore });
                localStorage.setItem(key, JSON.stringify(data));

                alert(`‚úì Score saved! ${name}: ${finalScore}/${quizData.length}`);
                window.location.href = "leaderboard.html";
            });

            btnRetake.addEventListener("click", () => {
                currentQuestion = 0;
                score = 0;
                userAnswers = [];
                answered = false;
                leaderName.value = "";
                wrapper.style.display = "block";
                form.style.display = "block";
                document.querySelector(".quiz-progress").style.display = "flex";
                quizComplete.style.display = "none";
                renderQuestion();
            });

            // Initial render
            renderQuestion();
        }
    });
</script>
</body>
</html>
